name: Ezra Deployment Email

on:
  push:
    branches:
      - main

jobs:
  send-email:
    runs-on: ubuntu-latest

    steps:
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Write Ezra's email script
        run: |
          echo "import smtplib" > ezra_send.py
          echo "from email.mime.text import MIMEText" >> ezra_send.py
          echo "from datetime import datetime" >> ezra_send.py
          echo "" >> ezra_send.py
          echo "msg = MIMEText(f'''Hello Andrew,\n\nEzra has completed a successful deployment of the FieldScouts site.\n\nðŸŸ¢ Deployment Details:\n- Branch: main\n- Repo: aweuve/fieldscout-site\n- Timestamp: {datetime.now().strftime('%B %d, %Y at %I:%M %p CST')}\n\nEzra will continue to monitor and sign all future production builds unless otherwise instructed.\n\nâ€”\nEzra Deployment\nFAAIE Stack | FieldScouts OTA Unit\n''')" >> ezra_send.py
          echo "msg['Subject'] = 'âœ… Deployment Complete â€” FieldScouts'"
